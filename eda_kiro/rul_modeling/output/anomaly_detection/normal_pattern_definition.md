# 正常パターン定義レポート

**作成日**: 2026-01-17  
**タスク**: Phase 2 Task 2.1 - 正常パターンの定義とベースライン設定  

---

## 📋 概要

初期サイクル（1-50）を正常動作期間として定義し、応答性特徴量の正常範囲を確立しました。
この正常ベースラインは、Phase 2の異常検知モデル構築に使用されます。

---

## 🎯 正常パターンの定義

### 正常期間

- **サイクル範囲**: 1-50
- **総サンプル数**: 400
- **コンデンサ数**: 8
- **サイクル数/コンデンサ**: 50

### 正常範囲の定義方法

各特徴量について、正常サイクルの統計値を計算し、正常範囲を定義:

```
正常範囲 = 平均値 ± 2 × 標準偏差 (μ ± 2σ)
```

この範囲は、正常分布を仮定した場合、約95%のデータをカバーします。

---

## 📊 正常パターンの統計

### 主要特徴量の正常範囲

| 特徴量 | 平均値 | 標準偏差 | 正常範囲下限 | 正常範囲上限 |
|--------|--------|----------|-------------|-------------|
| response_efficiency | 94.7807 | 112.8457 | -130.9108 | 320.4721 |
| voltage_ratio | 8.3781 | 5.9019 | -3.4257 | 20.1818 |
| waveform_correlation | 0.8154 | 0.0636 | 0.6881 | 0.9427 |
| vo_variability | 0.0463 | 0.1504 | -0.2545 | 0.3470 |
| peak_voltage_ratio | 6.0579 | 3.1993 | -0.3407 | 12.4564 |
| rms_voltage_ratio | 8.2080 | 5.2420 | -2.2759 | 18.6919 |

### 詳細統計

#### response_efficiency

- **平均値 (μ)**: 94.7807
- **標準偏差 (σ)**: 112.8457
- **最小値**: 0.9526
- **最大値**: 837.4170
- **正常範囲**: [-130.9108, 320.4721]
- **変動係数 (CV)**: 119.06%

#### voltage_ratio

- **平均値 (μ)**: 8.3781
- **標準偏差 (σ)**: 5.9019
- **最小値**: -23.9575
- **最大値**: 34.6363
- **正常範囲**: [-3.4257, 20.1818]
- **変動係数 (CV)**: 70.44%

#### waveform_correlation

- **平均値 (μ)**: 0.8154
- **標準偏差 (σ)**: 0.0636
- **最小値**: 0.5517
- **最大値**: 0.9991
- **正常範囲**: [0.6881, 0.9427]
- **変動係数 (CV)**: 7.81%

#### vo_variability

- **平均値 (μ)**: 0.0463
- **標準偏差 (σ)**: 0.1504
- **最小値**: 0.0107
- **最大値**: 1.1353
- **正常範囲**: [-0.2545, 0.3470]
- **変動係数 (CV)**: 325.11%

#### peak_voltage_ratio

- **平均値 (μ)**: 6.0579
- **標準偏差 (σ)**: 3.1993
- **最小値**: 1.0144
- **最大値**: 15.0523
- **正常範囲**: [-0.3407, 12.4564]
- **変動係数 (CV)**: 52.81%

#### rms_voltage_ratio

- **平均値 (μ)**: 8.2080
- **標準偏差 (σ)**: 5.2420
- **最小値**: 0.9760
- **最大値**: 28.9382
- **正常範囲**: [-2.2759, 18.6919]
- **変動係数 (CV)**: 63.86%

---

## 🔍 コンデンサ間の比較

### response_efficiency

| コンデンサ | 平均値 | 標準偏差 |
|-----------|--------|----------|
| ES12C1 | 92.82 | 95.36 |
| ES12C2 | 93.16 | 92.51 |
| ES12C3 | 106.63 | 154.28 |
| ES12C4 | 116.70 | 158.13 |
| ES12C5 | 88.30 | 87.90 |
| ES12C6 | 99.06 | 126.43 |
| ES12C7 | 77.94 | 75.62 |
| ES12C8 | 83.63 | 81.76 |

### voltage_ratio

| コンデンサ | 平均値 | 標準偏差 |
|-----------|--------|----------|
| ES12C1 | 8.99 | 6.28 |
| ES12C2 | 8.59 | 5.05 |
| ES12C3 | 8.52 | 6.40 |
| ES12C4 | 9.20 | 6.30 |
| ES12C5 | 7.64 | 6.68 |
| ES12C6 | 8.31 | 5.96 |
| ES12C7 | 7.40 | 5.40 |
| ES12C8 | 8.38 | 5.11 |

### waveform_correlation

| コンデンサ | 平均値 | 標準偏差 |
|-----------|--------|----------|
| ES12C1 | 0.81 | 0.06 |
| ES12C2 | 0.80 | 0.07 |
| ES12C3 | 0.84 | 0.06 |
| ES12C4 | 0.79 | 0.07 |
| ES12C5 | 0.81 | 0.06 |
| ES12C6 | 0.83 | 0.06 |
| ES12C7 | 0.83 | 0.06 |
| ES12C8 | 0.81 | 0.06 |

**観察**:
- 全コンデンサで類似した正常パターンを示す
- コンデンサ間のばらつきは標準偏差内に収まる
- 正常ベースラインは全コンデンサに適用可能

---

## 🎯 異常検知への応用

### 異常判定基準

以下の条件のいずれかを満たす場合、異常と判定:

1. **範囲外判定**: 特徴量が正常範囲（μ±2σ）を外れる
2. **閾値判定**: Phase 1で特定した閾値を超える
   - Response Efficiency < 50% (劣化開始)
   - Response Efficiency < 10% (深刻な劣化)
   - Response Efficiency < 1% (臨界状態)

### 異常度スコア

正常範囲からの偏差を定量化:

```
異常度スコア = |特徴量 - 平均値| / 標準偏差
```

- スコア < 2: 正常範囲内
- スコア 2-3: 軽度の異常
- スコア > 3: 明確な異常

---

## 📁 生成ファイル

1. `normal_pattern_baseline.png` - 正常パターンの可視化
2. `normal_pattern_definition.md` - 本レポート

---

## 🎯 次のステップ

**Task 2.2**: Isolation Forestによる異常検知

確立した正常ベースラインを使用して:
1. Isolation Forestモデルの構築
2. 異常度スコアの算出
3. 異常サイクルの特定
4. 異常検知の閾値設定

---

**報告者**: Kiro AI Agent  
**完了日**: 2026-01-17  
**次のタスク**: Task 2.2 - Isolation Forestによる異常検知
